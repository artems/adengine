- подготовка к запуску
    - загрузка заглушек шаблонов геометрии
    - загрузка заглушек сайтов
    - загрука активных флайтов (+ сценариев, креативов, баннеров)
        - статус активен
        - дата начала меньше текущей
        - есть активные баннеры
    - сортировка флайтов по приоритету
- обработка запросов
    - отбор флайтов по сети (набор флайтов А)
    - отбор флайтов (из А) без блокировок по текущему пользователю (набор флайтов Б)
    - выбор первого флайта (из Б)
    - попытаться получить блокировку на флайт по текущему пользователю
    - проверить ограничения
        - дата окончация не наступила
        - баланс флайта положительный
        - лимиты по открутки не изчерпались
        - лимиты по уникалам (по текущему) пользователю не исчерпались
        - если изчераалсь лимиты по открутке
            - снять блокировку
            - удалисть текущий флайт из общего пула
            - выбрать другой флайт
    - выбрать сценарий
    - проверить таргетинги
        - если таргетинг не прошел, выбрать след. сценарий
    - выбрать баннер
    - проверить ограничения
        - дата окончация не наступила
        - лимиты по открутки не изчерпались
        - если изчерапилсь лимиты по открутке
            - удалисть текущий баннер из общего пула
            - выбрать другой баннер
        - лимиты по уникалам (по текущему) пользователю не исчерпались
            - если проверки провалились, выбрать след. баннер
    - если не осталось баннеров в текущем сценарии, перейти к след сценарию
    - если не осталось сценариев в текущем флайте,
        - снять блокировку по текущему пользователю с флайта
        - удалить флайт из выборки (из Б)
        - выбрать след. флайт
    - увеличить счетчики
        - счетчик открутки в день (и в неделю, в месяц)
        - счетчик уникальных показов (или кликов) в сутки (в неделю, месяц)
    - проверить общие ограничения за день (за неделю, за месяц)
        - если накручен лимит, изключит флайт из системы
    - показать баннер